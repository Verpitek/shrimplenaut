<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shrimplenaut - Package management and distribution for Bedrock servers and addons</title>
    <meta name="description" content="Shrimplenaut is a package management and distribution platform designed for Minecraft Bedrock servers and Bedrock addons.">
    <meta name="keywords" content="Shrimplenaut, Verpitek, Minecraft Bedrock, Bedrock server, package management, addon distribution, Minecraft addons, server tools, mod management">
    <meta name="author" content="Verpitek">

    <meta property="og:title" content="Shrimplenaut by Verpitek - Package management and distribution for Bedrock servers and addons">
    <meta property="og:description" content="Shrimplenaut is a package management and distribution platform designed for Minecraft Bedrock servers and Bedrock addons.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="shrimplenaut.verpitek.com">
    <meta property="og:image" content="{{ url_for('static', filename='img/shrimplenaut.png') }}">
    <meta property="og:image:alt" content="Shrimplenaut Logo">

    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <link rel="canonical" href="shrimplenaut.verpitek.com">
</head>
<body>
<div class="container">
     <ul class="navbar">
         <li><img class="profile_image" src="{{ github_profile["avatar_url"] }}" height="64px"></li>
     {% if github_profile != None %}
         <li><p>logged in as {{ github_profile["username"] }}</p></li>
         <li><p>user ID: {{ github_profile["id"] }}</p></li>
         <li><a href="{{ url_for('index') }}">Home</a></li>
         <li><a href="{{ url_for('my_packages') }}">my packages</a></li>
         <li><a href="{{ url_for('submit_package') }}">submit a new package</a></li>
         <li><a href="logout">logout</a></li>
         {% else %}
         <li><a href="login">login</a></li>
         <style>
         .profile_image {
             border: none;
         }
         </style>
         {% endif %}
</ul>
</div>
    <div class="container" id="main" style="text-align: center">
        <form action="/search" method="GET">
              <input type="text" name="search_query" placeholder="Search..." class="search_input">
              <button type="submit" class="search_button">Search</button>
            </form>
    </div>
<script>
            const parsedResults = {{ results | tojson | safe }};
            const parsedItems = parsedResults["items"];
            const parsedPagination = parsedResults["pagination"]

            if (parsedPagination["total_items"] === 1) {
                document.getElementById("main").innerHTML += `<h2>found ${parsedPagination["total_items"]} packages with query "{{ query }}"</h2>`
            }
            else if (parsedPagination["total_items"] > 1) {
                document.getElementById("main").innerHTML += `<h2>found 1 package with query "{{ query }}"</h2>`
            }
            else {
                document.getElementById("main").innerHTML += `<h2>found no packages with query "{{ query }}"</h2>`
            }
            console.log(parsedItems)
            parsedItems.forEach((item) => {
              document.getElementById("main").innerHTML += `
              <div class="plugin_container">
                <div style="margin-right:10vw">
                    <h2>${item["name"]}</h2>
                    <p>author: ${item["author"]}</p>
                    <p>type: ${item["project_type"]}</p>
                    <p>license: ${item["license"]}</p>
                    <a href="${item["repository_url"]}">Download ${item["current_version"]}</a>
                </div>
                <div class="package_icon">
                   <img src=${item["package_icon"]} height="128px" width="auto" alt="no package icon" style="color: #ffeae2;">
                </div>
              </div>
              `
            });
            document.getElementById("main").innerHTML += `
        <div class="pagination">
        {% if results.pagination.page > 1 %}
            <a href="{{ url_for('search', search_query=query, page=results.pagination.page - 1, per_page=results.pagination.per_page) }}">
                &lt;&lt; Previous page
            </a>
        {% endif %}

        <p>Page {{ results.pagination.page }} of {{ results.pagination.total_pages }}</p>

        {% if results.pagination.page < results.pagination.total_pages %}
            <a href="{{ url_for('search', search_query=query, page=results.pagination.page + 1, per_page=results.pagination.per_page) }}">
                Next page &gt;&gt;
            </a>
        {% endif %}
    </div>
        <footer>
            <p id="footer">&copy; 2025 Verpitek. All rights reserved.</p>
        </footer>`;

        </script>
</body>
</html>